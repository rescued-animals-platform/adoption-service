jacoco {
    toolVersion = "0.8.7"
}

jacocoTestReport {
    dependsOn test

    reports {
        xml.required = true
        csv.required = false
        html.required = true
    }

    afterEvaluate {
        classDirectories.setFrom(files(classDirectories.files.collect {
            fileTree(dir: it, exclude: [
                    "ec/animal/adoption/AdoptionServiceApplication.class",
                    "ec/animal/adoption/configuration/*",
                    'ec/animal/adoption/adapter/cloudinary/CloudinaryConfiguration.class',
                    "ec/animal/adoption/domain/service/PagedEntity.class",
            ])
        }))
    }
}

test.finalizedBy(project.tasks.jacocoTestReport)