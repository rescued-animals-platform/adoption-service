jacoco {
    toolVersion = "0.8.7"
}

jacocoTestReport {
    dependsOn test

    reports {
        xml.required = true
        csv.required = false
        html.required = false
    }

    afterEvaluate {
        classDirectories.setFrom(files(classDirectories.files.collect {
            fileTree(dir: it, exclude: [
                    'ec/animal/adoption/AdoptionServiceApplication.class',
                    'ec/animal/adoption/domain/PagedEntity.class',
                    'ec/animal/adoption/configuration/*',
            ])
        }))
    }
}

test {
    jacoco {
        excludes += [
                'ec/animal/adoption/AdoptionServiceApplication.class',
                'ec/animal/adoption/domain/PagedEntity.class',
                'ec/animal/adoption/configuration/**/*',
        ]
    }
}