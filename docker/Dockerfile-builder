FROM gradle:7.3.3-jdk17

ARG arg_spring_profile=docker
ARG arg_adoption_service_url=http://adoption-service:8080

ENV SPRING_PROFILE=$arg_spring_profile
ENV ADOPTION_SERVICE_URL=$arg_adoption_service_url
ENV JWT_ACCESS_TOKEN=eyJhbGciOiJSUzI1NiJ9.eyJpc3MiOiJodHRwOi8vd2lyZW1vY2s6ODA4MC8iLCJzdWIiOiIxMjM0NTY3ODkwIiwiYXVkIjoiaHR0cHM6Ly9kdW1teS9kdW1teS5lYyIsImlhdCI6MTU4NjYzNzA0MiwiZXhwIjo5MDg2NzIzNDQyLCJodHRwczovL2R1bW15L29yZ2FuaXphdGlvbl9pZCI6IjU2MDA5MTE5LTQ0YmQtNDY5YS1hNTliLTQwMWFiMjNkMTljYSIsInBlcm1pc3Npb25zIjpbIm1hbmFnZTphbmltYWxzIiwicmVhZDphbmltYWxzLXB1YmxpYyJdfQ.Du8aPc6aiCebJXOAtR4Vki6c1v9Wd1CfXqXWN05pA2PZbv6uKOJuLWF8wHy7LylWz2NTnuCflaGrSSbdL3Ab73L8EgWgkrpQw8MeiPz3PKjX6FwlchfAmXUw-YTKzIIKQnhZeNp0E8c8oooWtl1pSaBgWgyNRhJg8qfEU4aPRLlxxKB40TJ08ZKHrovz0ldW23CAPifpLE457L5IQ6H7B3ugpankdJFty3HrvKpCtkcLbEhnQ-vvdDm7VQwdJEJehuNOCADYILxQqDfa8XuiO38HD7rLkWdO7LofUn6ASpo1DZH-jr1lYBZlzZkNtBMz0CFiiuel2p1jeBSfa3j0yg

COPY --chown=gradle:gradle . /app
WORKDIR /app