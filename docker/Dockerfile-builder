FROM gradle:6.3.0-jdk11

ARG arg_spring_profile=docker
ARG arg_adoption_service_url=http://adoption-service:8080

ENV SPRING_PROFILE=$arg_spring_profile
ENV ADOPTION_SERVICE_URL=$arg_adoption_service_url
ENV JWT_ACCESS_TOKEN=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InNrc2hkYjgydHUzYm5pb3NodWprbnNraGRiYmprc2JvM3UifQ.eyJpc3MiOiJodHRwOi8vd2lyZW1vY2s6ODA4MC8iLCJzdWIiOiIxMjM0NTY3ODkwIiwiYXVkIjoiaHR0cHM6Ly9hbmltYWxlcy1yZXNjYXRhZG9zL3NlcnZpY2lvLWFkb3BjaW9uZXMuZWMiLCJpYXQiOjE1ODY2MzcwNDIsImV4cCI6OTA4NjcyMzQ0MiwiaHR0cHM6Ly9hZG9wdGlvbi1zZXJ2aWNlL29yZ2FuaXphdGlvbl9pZCI6IjU2MDA5MTE5LTQ0YmQtNDY5YS1hNTliLTQwMWFiMjNkMTljYSIsInBlcm1pc3Npb25zIjpbIm1hbmFnZTphbmltYWxzIiwicmVhZDphbmltYWxzLXB1YmxpYyJdfQ.O2mJvPPIc2NJKd5tfaORRUjXvXxAU6UppPiSuDF9fFZz2ukIZA3zX1GoPOUGyL9GL8zrCgorkMOYcYB5ECj8RkA6U3DGk6kjZ9J-wpGq3BmcrF-xlmYpHzwtgkBRfdmbKGO801TsobsSiWEdSCtenSN0OOzzBk1L3CrdYDOqAw4C5xsOdJ_wj5ILny8xZ4jSY3YymLBz2oApWLnwWiJNXiMQ0kaOJpiKXGbduEy39VPDahe3L2TJGwV1wKc_vpg3IyMxGztL_jK_s2fXHQ94mFzQ9Zo5bwyPK-eDHHZcRSciByky5EIFCpg2fhsKn4uPWFarCLTmCzg3cWQT9NCTvQ

COPY --chown=gradle:gradle . /app
WORKDIR /app